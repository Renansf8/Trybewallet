(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/wallet3.ed450dd4.png"},33:function(e,t,a){e.exports=a(50)},38:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=a(17),i=(a(38),a(11)),s=a(2),u=a(16),m=a(9),d=a(10),h=a(7),p=a(13),E=a(12),b=a(3),f="https://economia.awesomeapi.com.br/json/all",v=a(21),g=a.n(v),y=(a(43),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={email:"",password:"",disabled:!0},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.formCheck=e.formCheck.bind(Object(h.a)(e)),e.saveEmail=e.saveEmail.bind(Object(h.a)(e)),e}return Object(d.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n)),this.formCheck()}},{key:"formCheck",value:function(){var e=this.state,t=e.email,a=e.password;/(.*)@(.*).com/.test(t)&&a.length>=5?this.setState({disabled:!1}):this.setState({disabled:!0})}},{key:"saveEmail",value:function(){(0,this.props.changeEmail)(this.state.email)}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,c=t.disabled;return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",null,r.a.createElement("div",{className:"title-container"},r.a.createElement("h3",null,"TrybeWallet"),r.a.createElement("img",{className:"wallet-logo",src:g.a,alt:"wallet"})),r.a.createElement("input",{type:"email",name:"email","data-testid":"email-input",value:a,onChange:this.handleChange,placeholder:"e-mail"}),r.a.createElement("input",{type:"password",name:"password","data-testid":"password-input",value:n,onChange:this.handleChange,placeholder:"senha"}),r.a.createElement(o.b,{to:"/carteira"},r.a.createElement("button",{onClick:function(){return e.saveEmail()},disabled:c,type:"button"},"Entrar"))))}}]),a}(r.a.Component)),j=Object(i.b)(null,(function(e){return{changeEmail:function(t){return e(function(e){return{type:"ADD_EMAIL",payload:e}}(t))}}}))(y),O=(a(45),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.onClick;return r.a.createElement("button",{className:"buttonForm",type:"button",onClick:e},"Adicionar despesa")}}]),a}(n.Component)),C=(a(46),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.submitExpense=e.submitExpense.bind(Object(h.a)(e)),e.resetState=e.resetState.bind(Object(h.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getDataFromAPI)()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"submitExpense",value:function(){var e=this.props.exchangeRates,t=this.state;e({value:t.value,description:t.description,currency:t.currency,method:t.method,tag:t.tag});var a=document.getElementById("form"),n=document.getElementById("add-button");a.classList.add("form-container"),n.classList.remove("add-button-none"),n.classList.add("add-button")}},{key:"onClick",value:function(){var e=document.getElementById("form"),t=document.getElementById("add-button");e.classList.remove("form-container"),e.classList.add("form-container-visible"),t.classList.remove("add-button"),t.classList.add("add-button-none")}},{key:"resetState",value:function(){this.setState({value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"})}},{key:"render",value:function(){var e=this,t=this.props.currencies,a=this.state,n=a.value,c=a.description,l=a.currency,o=a.tag,i=a.method;return r.a.createElement("div",null,r.a.createElement("div",{id:"form",className:"form-container"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{id:"value",name:"value",type:"number",onChange:this.handleChange,value:n})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{id:"description",name:"description",type:"text",onChange:this.handleChange,value:c})),r.a.createElement("label",{htmlFor:"currency"},"Moeda",r.a.createElement("select",{id:"currency",name:"currency",onChange:this.handleChange,value:l},Object.keys(t).map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"method",name:"method",onChange:this.handleChange,value:i},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"category"},"Tag",r.a.createElement("select",{id:"category",name:"tag",onChange:this.handleChange,value:o},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement(O,{onClick:function(){e.submitExpense(),e.resetState()}}))),r.a.createElement("button",{onClick:function(){return e.onClick()},type:"button",id:"add-button",className:"add-button"},"Adicionar despesa"))}}]),a}(n.Component)),x=Object(i.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{getDataFromAPI:function(t){return e((function(e){return e({type:"REQUEST_API"}),fetch(f).then((function(e){return e.json()})).then((function(t){delete t.USDT,e({type:"REQUEST_API_SUCCESS",payload:t})})).catch((function(t){return e(function(e){return{type:"REQUEST_API_ERROR",payload:e}}(t))}))}))},exchangeRates:function(t){return e((a=t,function(e){return fetch(f).then((function(e){return e.json()})).then((function(t){console.log(t),e(function(e){return{type:"EXCHANGE_API_SUCCESS",state:e}}(Object(b.a)(Object(b.a)({},a),{},{exchangeRates:t})))})).then((function(t){return e(function(e){return{type:"EXCHANGE_API_ERROR",error:e}}(t))}))}));var a}}}))(C),k=a(32),w=["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Excluir"],S=(a(47),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.expenses,a=e.deleteExp;return r.a.createElement("table",{className:"expenses-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,w.map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Descri\xe7\xe3o:"),e.description),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Tag:"),e.tag),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"M\xe9todo de pagamento:"),e.method),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Valor:"),e.value),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Moeda:"),e.exchangeRates[e.currency].name.replace("/Real Brasileiro","")),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"C\xe2mbio utilizado:"),Number(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Valor convertido:"),(Number(e.value)*Number(e.exchangeRates[e.currency].ask)).toFixed(2)),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Moeda de convers\xe3o:"),"Real"),r.a.createElement("td",null,r.a.createElement("span",{className:"desc-minwitdh"},"Excluir:"),r.a.createElement("button",{onClick:function(){return a(e.id)},"data-testid":"delete-btn",type:"button"},r.a.createElement(k.a,null))))}))))}}]),a}(n.Component)),N=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExp:function(t){return e(function(e){return{type:"DELETE_EXPENSE",id:e}}(t))}}}))(S),R=(a(48),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).sumTotalExpense=e.sumTotalExpense.bind(Object(h.a)(e)),e}return Object(d.a)(a,[{key:"sumTotalExpense",value:function(){var e=this.props.expenses;return e.length?e.map((function(e){var t=e.value;return e.exchangeRates[e.currency].ask*t})).reduce((function(e,t){return e+t}),0).toFixed(2):"0,00"}},{key:"render",value:function(){var e=this.props.email;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},"TrybeWallet",r.a.createElement("img",{src:g.a,alt:"wallet"})),r.a.createElement("div",{className:"user-info"},r.a.createElement("p",{"data-testid":"email-field",className:"user-email"},"Email:",r.a.createElement("span",{className:"email"},e)),r.a.createElement("p",{"data-testid":"total-field",className:"total-field"},"Despesa Total:",r.a.createElement("span",{className:"total-sum"},this.sumTotalExpense()," BRL")))),r.a.createElement(x,null),r.a.createElement(N,null))}}]),a}(r.a.Component)),A=Object(i.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),null)(R);a(49);var T=function(){return r.a.createElement("div",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:j}),r.a.createElement(s.a,{exact:!0,path:"/carteira",component:A})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(14),D=a(29),I=a(30),F={email:""},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EMAIL":return Object(b.a)(Object(b.a)({},e),{},{email:t.payload});default:return e}},L=a(31),U={currencies:[],expenses:[],isFetching:!1,error:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_API":return Object(b.a)(Object(b.a)({},e),{},{isFetching:!0});case"REQUEST_API_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{currencies:t.payload,isFetching:!1});case"REQUEST_API_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:t.payload,isFetching:!1});case"EXCHANGE_API_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{expenses:[].concat(Object(L.a)(e.expenses),[Object(b.a)({id:e.expenses.length},t.state)])});case"EXCHANGE_API_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:t.error});case"DELETE_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});default:return e}},B=Object(_.combineReducers)({user:P,wallet:M}),Q=Object(_.createStore)(B,Object(D.composeWithDevTools)(Object(_.applyMiddleware)(I.a)));l.a.render(r.a.createElement(i.a,{store:Q},r.a.createElement(o.a,null,r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.4d9c860e.chunk.js.map